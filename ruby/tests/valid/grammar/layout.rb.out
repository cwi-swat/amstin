grammar GrammarGrammar start Grammar 
    Grammar ::= 
        [ Grammar ] "grammar" name : int "start" start : Rule ^ rules : Rule * 
    Rule ::= [ Rule ] name : int "::=" arg : Alt 
    Alt ::= [ Alt ] alts : { Create "|" } + 
    Create ::= [ Create ] "[" name : int "]" arg : Sequence |Sequence 
    Sequence ::= [ Sequence ] elements : Field * 
    Field ::= [ Field ] name : int ":" arg : Pattern |Pattern 
    Pattern ::= 
        [ Value ] kind : "int" |
        [ Value ] kind : "str" |
        [ Value ] kind : "real" |
        [ Value ] kind : "bool" |
        [ Value ] kind : "sym" |
        [ Code ] "@" code : int |
        [ Ref ] name : int "^" |
        [ Lit ] value : int |
        [ Call ] rule : Rule ^ |
        [ Regular ] 
            arg : Pattern 
            "*" 
            @ "self.optional = true; self.many = true; self.sep = nil" |
        [ Regular ] arg : Pattern "?" @ "self.optional = true; self.sep = nil" |
        [ Regular ] arg : Pattern "+" @ "self.many = true; self.sep = nil" |
        [ Regular ] 
            "{" 
            arg : Pattern 
            sep : int 
            "}" 
            "*" 
            @ "self.optional = true; self.many = true" |
        [ Regular ] "{" arg : Pattern sep : int "}" "+" @ "self.many = true" |
        "(" Alt ")" 
